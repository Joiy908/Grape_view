<template>
  <div class="markdown-typer">
    <el-collapse>
      <el-collapse-item title="tool result" name="1">
        <div v-html="typedHtml"></div>
      </el-collapse-item>
    </el-collapse>
  </div>
</template>

<script setup>
import { ref, onMounted } from 'vue'
import MarkdownIt from 'markdown-it'

const md = new MarkdownIt({ breaks: true })
const markdownText = `
> sfsfs
📁 Metadata:\n- file_path: D:\\Joiy\\on_work\\AIGC_APP\\data\\grape.md\n- header_path: /第七章 葡萄病虫害防治/\n📝 Text:\n## 61. 如何防治葡萄黑痘病？\n**症状**：葡萄黑痘病是一种常见病，主要为害葡萄的绿色部分，即葡萄的叶片、果实、新梢、叶柄、果梗、穗轴、卷须和花序等部位，尤其
幼嫩部分受害严重。黑痘病是一种真菌病害，主要以菌丝体在病蔓的溃疡斑内越冬，翌年5月下旬产生分生孢子，借风雨传播。\n- **叶片受害**：初期出现淡褐色圆形小斑
，后扩大为边缘暗褐色，中央呈淡褐色或灰褐色的圆形或不规则形病斑，以后中央呈灰白色而凹陷，边缘暗褐色。\n- **花穗受害**：在花蕾上出现浅褐色小斑点，逐渐变 
黑枯死。穗轴和小穗梗受害后，形成褐色斑点，严重时造成穗枯。\n- **新梢、卷须、叶柄和果柄受害**：初呈褐色圆形或不规则形小斑点，后扩大为近椭圆形，灰黑色， 
边缘深褐色，中部显著凹陷并开裂。蔓上形成溃疡斑，溃疡斑有时向下深入直到形成层；病梢停止生长，以致枯萎，变干变黑。\n- **幼果受害**：表面初呈褐色近圆形小 
斑，逐渐扩大，中央变灰褐或灰白色，略下陷，上有黑色小突起，病斑边缘紫褐色，后期病斑硬化或龟裂，病果终止膨大，不能食用。\n\n**发生规律**：病菌以菌丝体在 
感病枝蔓、果实、叶片和叶痕内越冬。第二年展叶后新的分生孢子借风雨传播，进行初侵染。以病残叶上产生的分生孢子最多。分生孢子的产生要求高湿及25°C左右的适温 
，菌丝体的生长温度为10°C～40°C，适宜温度为30°C，潜育期约10天，高温高湿是本病蔓延的外界条件。\n\n**防治方法**：\n1. 清除越冬病原。秋季落叶后，结合冬剪彻
底清除园内病残体和枯枝落叶，集中深埋或烧毁。\n2. 增施磷、钾肥，防止偏施氮肥。\n3. 春天芽萌动后，喷3～5波美度的石硫合剂。展叶后每隔半月喷一次石灰半量式200倍的波尔多液，生长中后期喷石灰等量式波尔多液。在花前花后喷药一定要均匀、细致。亦可喷50%的800倍的退菌特或50%的1000倍多菌灵可湿性粉剂。\n---\n📁 Metadata:\n- file_path: D:\\Joiy\\on_work\\AIGC_APP\\data\\grape.md\n- header_path: /第七章 葡萄病虫害防治/\n📝 Text:\n## 66. 如何防治葡萄裂果病？\n**症状** 
：葡萄裂果病属于生理性病害，主要发生在浆果成熟期。其原因是在果实生长后期土壤水分变化过大，久旱逢雨或大水漫灌，根从土壤中吸收大量水分，输送到果实内，使 
果实膨压骤增，果皮纵向裂开。葡萄裂果病与品种特性、栽培技术有关，具有裂果特性的品种，如果栽培技术得当可以防止裂果，如里扎马特、乍娜等，但也受栽培技术和 
气候（特别是雨量分布）的影响。患葡萄裂果病的葡萄在接近采收时，果皮开裂，随即果粒腐烂。发病轻者，穗形不整齐，降低商品价值。在浆果成熟期控制灌水、套袋、 
设防雨罩等措施，可防止或减轻葡萄裂果病。\n\n**发生规律**：由于土壤水分失调而引起的。葡萄生长前期如果土壤过于干旱，果皮形成的机械组织伸缩性较小，果实进 
入转色期后，细胞内含糖量增高，渗透压增大，在这个时候如果给土壤灌水，根部就从土壤中吸收大量的水分，使果粒内水分急骤增多，靠近果刷的细胞分裂和生理活动加 
快，而靠近果皮的细胞活动缓慢，由于果实吸收的水分多，压力增大，而果皮伸张性较小，使果粒顺果刷的方向纵向开裂。土壤条件差、地势低、土壤黏重的地方发生严重 
。\n\n**防治方法**：\n1. 果园覆草覆膜，均衡土壤水分供应。既可防止根系吸收过多的雨水，又可防止地面水分蒸发，减少土壤水分变化。干旱时，要把覆盖与灌水结合
起来。\n2. 适时灌水，低洼地要及时排水，经常疏松土壤，做到排灌舒畅，保持地面土壤湿润。同时，通过深翻和施有机肥、石灰等改善土壤物理性状，以减少土壤水分变
化。\n3. 调节结果量。葡萄着色不良的树，发生裂果尤多。要通过疏穗、疏粒、掐穗，调整好结果量，减少裂果。\n4. 抬高架面，提高果穗离地面的高度。\n5. 坐果后、
成熟前喷施氯化钙、氨基酸钙。接近成熟期，要适当控制氮肥和水分，减缓果实增大速度。\n6. 架面设置遮雨棚和果穗套袋防雨。葡萄果面直接吸收雨水，或从根部吸收水
分以后，果实产生膨胀压，导致引起裂果。雨天采取遮雨措施，能有效防止裂果，果穗套袋可收到良好的效果。\n7. 防治病虫害。葡萄病虫危害的伤口，是葡萄裂果重要因
素。及时做好葡萄病虫害的防治工作极为重要。彻底清除枯枝、落叶，将病叶、病果烧掉或深埋。萌发前喷布5波美度石硫合剂。白粉病发生时，可喷25%粉锈宁1500倍液， 
或70%甲基托布津可湿性粉剂1000倍液，连喷2～3次，或退菌特800倍液防治。\n---\n📁 Metadata:\n- file_path: D:\\Joiy\\on_work\\AIGC_APP\\data\\grape.md\n- header_path: /第七章 葡萄病虫害防治/\n📝 Text:\n## 59. 如何防治葡萄白腐病？\n**症状**：主要为害果� 初于果穗或果梗上发生不规则、边缘不鲜明的褐色水渍状病斑
，并向果实蔓延，果面呈浅褐色软腐，密生灰白色小粒点，以后果梗干枯缢缩，严重时全穗腐烂，病果易脱落。新梢上的病斑呈淡褐色不规则形的水渍状，以后逐渐扩大， 
其上长出均匀密麻的小粒点。叶片发病部位多在叶尖及叶缘，也能扩展到叶片中心，初呈淡褐色水渍状圆形或不规则形病斑，其上出现深浅不同的轮纹，并产生灰白色小粒 
点。病斑干枯后易破裂。潮湿时，病部可闻出酸腥的霉瘫味。\n\n**发生规律**：从夏到秋都能发生，但以7～8月多雨而温度较高时蔓延快。病菌主要是以孢子器或菌丝体 
在散落地表的病残体上越冬。翌年分生孢子借风雨及昆虫传播到寄主的感染部位，从伤口或自然气孔（蜜腺、皮孔、气孔）侵入，暴风雨及雹害过后，往往使病情加剧。此 
外土质黏重、地势低洼、杂草丛生容易引发此病。\n\n**防治方法**：\n1. 加强栽培管理。合理施肥，多施有机肥，增强树势，提高树体的抗病力。保持合理的架面结构，
让枝蔓分布适宜，使架面通风透光良好。及时摘心、绑蔓和中耕除草。注意园地不积水，降低空气湿度。适当提高结果部位，50厘米以下不留果穗，减少病菌的侵染机会。\n2. 清除病原。发病期及时清除树上和地上的病穗、病粒和病叶等，集中深埋。秋季落叶后，彻底清除园内病残体和枯枝落叶，减少越冬病原菌。\n3. 药剂防治。在早春葡
萄发芽前向树上和地面喷布3波美度石硫合剂；在生长季可喷75%的百菌清可湿性粉剂600～800倍液，或50%福美双800倍液，锰杀生600～800倍液都能取得良好的防治效果。
`

const htmlContent = md.render(markdownText)
const typedHtml = ref('')
let index = 0

const typeWriter = () => {
  // if (index < htmlContent.length) {
  //   typedHtml.value += htmlContent[index]
  //   index++
  //   setTimeout(typeWriter, 10) // 控制打字速度
  // }
  typedHtml.value = htmlContent
}

onMounted(() => {
  typeWriter()
})
</script>

<style scoped>
.markdown-typer {
  font-family: 'Courier New', monospace;
  /* white-space: pre-wrap; */
  line-height: 1.6;
}
blockquote {
  border-left: 100px solid #212020;
  padding: 1rem;
}
</style>
